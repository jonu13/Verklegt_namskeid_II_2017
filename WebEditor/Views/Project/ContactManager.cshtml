@model WebEditor.Models.ViewModels.ContactViewModel
@{
    ViewBag.Title = "ContactManager";
}

<h2>Contact Manager</h2>

<div class="container"><h2>My Contacts</h2></div>
<div id="tabs" class="container">
    <ul class="nav nav-tabs">
        @foreach(var project in Model.projects)
        {
            if (project.projectID == Model.projects.First().projectID)
            {
                <li class="active"><a href="#@project.name" data-toggle= "tab" role="tab">@project.name</a></li>
            }
            else
            {
                <li><a href="#@project.name" data-toggle="tab" role="tab">@project.name</a></li>
            }
        }
    </ul> 

    <div class="tab-content ">
        @foreach(var project in Model.projects)
        {

            if (project.projectID == Model.projects.First().projectID)
            {
                <div class="tab-pane active" id=@project.name>
                    <table class="table">
                        <tr>
                            <th>
                                User email
                            </th>
                            <th>
                                Drop user from project
                            </th>
                        </tr>
                        @foreach(var connector in Model.contacts)
                        {                           
                            if(connector.projectId == project.projectID){ }
                            else
                            {
                                continue;
                            }
                            <tr>
                                <td>                                        
                                    @connector.userName
                                </td>
                                <td>
                                    @using (Html.BeginForm("ContactManager", "Project", FormMethod.Post))
                                    {
                                        <input type="hidden" name="projId" value="@project.projectID"/>
                                        <input type="hidden" name="userName" value="@connector.userName" />
                                        <input type="submit" value="Drop" class="btn btn-default">
                                    } 
                                </td>
                            </tr>         
                        }
                    </table>
                </div>
            }
            else
            {
                <div class="tab-pane" id=@project.name>
                    <table class="table">
                        <tr>
                            <th>
                                User email
                            </th>
                            <th>
                                Drop user from project
                            </th>
                        </tr>
                    @foreach (var connector in Model.contacts)
                    {
                        if (connector.projectId == project.projectID) { }
                        else
                        {
                            continue;
                        }
                        <tr>
                            <td>
                                @connector.userName
                            </td>
                            <td>
                                @using (Html.BeginForm("ContactManager", "Project", FormMethod.Post))
                                {
                                    <input type="hidden" name="projId" value="@project.projectID" />
                                        <input type="hidden" name="userName" value="@connector.userName"/>
                                        <input type="submit" value="Drop" class="btn btn-default">
                                }                              
                            </td>
                        </tr>
                    }
                    </table>
                </div>
             }
        }
    </div>
</div>

<div class="container"><h3>Add contacts to project</h3></div>
<div id="Search" class="container">
    <div>
        @using (Html.BeginForm())
        {

        }
    </div>
</div>
       